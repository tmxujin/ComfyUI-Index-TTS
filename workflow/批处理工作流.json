{
  "id": "d09e02dc-60ea-41c9-aa54-e50523ef8d3e",
  "revision": 0,
  "last_node_id": 364,
  "last_link_id": 141,
  "nodes": [
    {
      "id": 310,
      "type": "IndexTTSProMultiChannelNode",
      "pos": [
        100,
        100
      ],
      "size": [
        400,
        600
      ],
      "flags": {},
      "order": 11,
      "mode": 0,
      "inputs": [
        {
          "name": "narrator_audio",
          "type": "AUDIO",
          "link": 129
        },
        {
          "name": "character1_audio",
          "shape": 7,
          "type": "AUDIO",
          "link": 125
        },
        {
          "name": "character2_audio",
          "shape": 7,
          "type": "AUDIO",
          "link": 126
        },
        {
          "name": "character3_audio",
          "shape": 7,
          "type": "AUDIO",
          "link": 127
        },
        {
          "name": "character4_audio",
          "shape": 7,
          "type": "AUDIO",
          "link": 128
        },
        {
          "name": "character5_audio",
          "shape": 7,
          "type": "AUDIO",
          "link": null
        },
        {
          "name": "structured_text",
          "type": "STRING",
          "widget": {
            "name": "structured_text"
          },
          "link": 123
        }
      ],
      "outputs": [
        {
          "name": "combined_audio",
          "type": "AUDIO",
          "links": []
        },
        {
          "name": "narrator_audio_out",
          "type": "AUDIO",
          "links": []
        },
        {
          "name": "character1_audio_out",
          "type": "AUDIO",
          "links": []
        },
        {
          "name": "character2_audio_out",
          "type": "AUDIO",
          "links": []
        },
        {
          "name": "character3_audio_out",
          "type": "AUDIO",
          "links": []
        },
        {
          "name": "character4_audio_out",
          "type": "AUDIO",
          "links": []
        },
        {
          "name": "character5_audio_out",
          "type": "AUDIO",
          "links": []
        },
        {
          "name": "seed",
          "type": "INT",
          "links": null
        },
        {
          "name": "Subtitle",
          "type": "STRING",
          "links": [
            89
          ]
        },
        {
          "name": "SimplifiedSubtitle",
          "type": "STRING",
          "links": null
        }
      ],
      "properties": {
        "aux_id": "tmxujin/ComfyUI-Index-TTS",
        "ver": "f3dd666f8ccc7e8d6cc562a4f43892a1c365e22f",
        "Node name for S&R": "IndexTTSProMultiChannelNode"
      },
      "widgets_values": [
        "<Narrator>少女此时就站在院墙那边，她有一双杏眼，怯怯弱弱。<Narrator>院门那边，有个嗓音说：<Character1>你这婢女卖不卖？<Narrator>宋集薪愣了愣，循着声音转头望去，是个眉眼含笑的锦衣少年，站在院外，一张全然陌生的面孔。<Narrator>锦衣少年身边站着一位身材高大的老者，面容白皙，脸色和蔼，轻轻眯眼打量着两座毗邻院落的少年少女。<Narrator>老者的视线在陈平安一扫而过，并无停滞，但是在宋集薪和婢女身上，多有停留，笑意渐渐浓郁。<Narrator>宋集薪斜眼道：<Character2>卖！怎么不卖！<Narrator>那少年微笑道：<Character1>那你说个价。<Narrator>少女瞪大眼眸，满脸匪夷所思，像一头惊慌失措的年幼麋鹿。<Narrator>宋集薪翻了个白眼，伸出一根手指，晃了晃，“白银一万两！”<Narrator>锦衣少年脸色如常，点头道：<Character1>好。<Narrator>宋集薪见那少年不像是开玩笑的样子，连忙改口道：<Character2>是黄金万两！<Narrator>锦衣少年嘴角翘起，道：<Character1>逗你玩的。<Narrator>宋集薪脸色阴沉。",
        "IndexTTS-1.5",
        "auto",
        1,
        2214447845,
        "randomize",
        1,
        0.8,
        30,
        10,
        0,
        3,
        600
      ]
    },
    {
      "id": 353,
      "type": "LoadAudio",
      "pos": [
        -228.5909881591797,
        104.51984405517578
      ],
      "size": [
        270,
        136
      ],
      "flags": {},
      "order": 0,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "AUDIO",
          "type": "AUDIO",
          "links": [
            128
          ]
        }
      ],
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.3.32",
        "Node name for S&R": "LoadAudio"
      },
      "widgets_values": [
        "御姐配音.wav",
        null,
        null
      ]
    },
    {
      "id": 354,
      "type": "LoadAudio",
      "pos": [
        -237.10943603515625,
        304.186767578125
      ],
      "size": [
        270,
        136
      ],
      "flags": {},
      "order": 1,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "AUDIO",
          "type": "AUDIO",
          "links": [
            125
          ]
        }
      ],
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.3.32",
        "Node name for S&R": "LoadAudio"
      },
      "widgets_values": [
        "北京大爷.mp3",
        null,
        null
      ]
    },
    {
      "id": 355,
      "type": "LoadAudio",
      "pos": [
        -236.99490356445312,
        487.7225646972656
      ],
      "size": [
        270,
        136
      ],
      "flags": {},
      "order": 2,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "AUDIO",
          "type": "AUDIO",
          "links": [
            126,
            129
          ]
        }
      ],
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.3.32",
        "Node name for S&R": "LoadAudio"
      },
      "widgets_values": [
        "温润男声.mp3",
        null,
        null
      ]
    },
    {
      "id": 356,
      "type": "LoadAudio",
      "pos": [
        -238.38922119140625,
        681.5585327148438
      ],
      "size": [
        270,
        136
      ],
      "flags": {},
      "order": 3,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "AUDIO",
          "type": "AUDIO",
          "links": [
            127
          ]
        }
      ],
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.3.32",
        "Node name for S&R": "LoadAudio"
      },
      "widgets_values": [
        "御姐配音.wav",
        null,
        null
      ]
    },
    {
      "id": 352,
      "type": "String Literal",
      "pos": [
        -714.0534057617188,
        124.83438873291016
      ],
      "size": [
        427.5860595703125,
        515.1315307617188
      ],
      "flags": {},
      "order": 4,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "STRING",
          "type": "STRING",
          "links": [
            123
          ]
        }
      ],
      "properties": {
        "cnr_id": "comfy-image-saver",
        "ver": "65e6903eff274a50f8b5cd768f0f96baf37baea1",
        "Node name for S&R": "String Literal"
      },
      "widgets_values": [
        "<Character1>“明天要降温了。”</Character1>\n<Character2>“爸，护膝要记得用”</Character2>\n<Character3>“穿件毛衣”</Character3>\n<Character4>“知道啦”</Character4>"
      ]
    },
    {
      "id": 328,
      "type": "ImageMaskSwitch",
      "pos": [
        584.5506591796875,
        523.386962890625
      ],
      "size": [
        267,
        317
      ],
      "flags": {},
      "order": 13,
      "mode": 0,
      "inputs": [
        {
          "name": "images1",
          "type": "IMAGE",
          "link": 90
        },
        {
          "name": "mask1_opt",
          "shape": 7,
          "type": "MASK",
          "link": 91
        },
        {
          "name": "images2_opt",
          "shape": 7,
          "type": "IMAGE",
          "link": 92
        },
        {
          "name": "mask2_opt",
          "shape": 7,
          "type": "MASK",
          "link": 93
        },
        {
          "name": "images3_opt",
          "shape": 7,
          "type": "IMAGE",
          "link": 94
        },
        {
          "name": "mask3_opt",
          "shape": 7,
          "type": "MASK",
          "link": 95
        },
        {
          "name": "images4_opt",
          "shape": 7,
          "type": "IMAGE",
          "link": 96
        },
        {
          "name": "mask4_opt",
          "shape": 7,
          "type": "MASK",
          "link": 97
        },
        {
          "name": "select",
          "type": "INT",
          "widget": {
            "name": "select"
          },
          "link": 136
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            99
          ]
        },
        {
          "name": "MASK",
          "type": "MASK",
          "links": []
        }
      ],
      "title": "图像遮罩切换器",
      "properties": {
        "cnr_id": "comfyui-impact-pack",
        "ver": "8.23.0",
        "Node name for S&R": "ImageMaskSwitch"
      },
      "widgets_values": [
        1
      ]
    },
    {
      "id": 357,
      "type": "SaveImage",
      "pos": [
        1180.366943359375,
        537.9609985351562
      ],
      "size": [
        339.6673583984375,
        319.8599853515625
      ],
      "flags": {},
      "order": 18,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 121
        }
      ],
      "outputs": [],
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.3.63",
        "Node name for S&R": "SaveImage"
      },
      "widgets_values": [
        "ComfyUI_Character1"
      ]
    },
    {
      "id": 281,
      "type": "ImageResizeKJv2",
      "pos": [
        876.2379150390625,
        523.364013671875
      ],
      "size": [
        270,
        336
      ],
      "flags": {},
      "order": 17,
      "mode": 0,
      "inputs": [
        {
          "name": "image",
          "type": "IMAGE",
          "link": 99
        },
        {
          "name": "mask",
          "shape": 7,
          "type": "MASK",
          "link": null
        },
        {
          "name": "width",
          "type": "INT",
          "widget": {
            "name": "width"
          },
          "link": 50
        },
        {
          "name": "height",
          "type": "INT",
          "widget": {
            "name": "height"
          },
          "link": 51
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            121
          ]
        },
        {
          "name": "width",
          "type": "INT",
          "links": null
        },
        {
          "name": "height",
          "type": "INT",
          "links": null
        },
        {
          "name": "mask",
          "type": "MASK",
          "links": null
        }
      ],
      "properties": {
        "cnr_id": "comfyui-kjnodes",
        "ver": "3fcd22f2fe2be69c3229f192362b91888277cbcb",
        "Node name for S&R": "ImageResizeKJv2"
      },
      "widgets_values": [
        512,
        512,
        "lanczos",
        "crop",
        "0, 0, 0",
        "center",
        16,
        "cpu",
        "<tr><td>Output: </td><td><b>1</b> x <b>352</b> x <b>640 | 2.58MB</b></td></tr>"
      ]
    },
    {
      "id": 245,
      "type": "INTConstant",
      "pos": [
        -625.4535522460938,
        732.765625
      ],
      "size": [
        210,
        58
      ],
      "flags": {},
      "order": 5,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "value",
          "type": "INT",
          "links": [
            50
          ]
        }
      ],
      "title": "Width",
      "properties": {
        "cnr_id": "comfyui-kjnodes",
        "ver": "3fcd22f2fe2be69c3229f192362b91888277cbcb",
        "Node name for S&R": "INTConstant"
      },
      "widgets_values": [
        360
      ],
      "color": "#1b4669",
      "bgcolor": "#29699c"
    },
    {
      "id": 246,
      "type": "INTConstant",
      "pos": [
        -630.5872802734375,
        854.4806518554688
      ],
      "size": [
        210,
        58
      ],
      "flags": {},
      "order": 6,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "value",
          "type": "INT",
          "links": [
            51
          ]
        }
      ],
      "title": "Height",
      "properties": {
        "cnr_id": "comfyui-kjnodes",
        "ver": "3fcd22f2fe2be69c3229f192362b91888277cbcb",
        "Node name for S&R": "INTConstant"
      },
      "widgets_values": [
        640
      ],
      "color": "#1b4669",
      "bgcolor": "#29699c"
    },
    {
      "id": 303,
      "type": "LoadImage",
      "pos": [
        335.14508056640625,
        1164.9832763671875
      ],
      "size": [
        210,
        314
      ],
      "flags": {},
      "order": 7,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            96
          ]
        },
        {
          "name": "MASK",
          "type": "MASK",
          "links": [
            97
          ]
        }
      ],
      "title": "加载角色4",
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.3.63",
        "Node name for S&R": "LoadImage"
      },
      "widgets_values": [
        "example.png",
        "image"
      ]
    },
    {
      "id": 300,
      "type": "EnhancedSubtitleBatchIterator",
      "pos": [
        571.5067138671875,
        126.5555419921875
      ],
      "size": [
        400,
        320
      ],
      "flags": {},
      "order": 12,
      "mode": 0,
      "inputs": [
        {
          "name": "subtitle_text",
          "type": "STRING",
          "widget": {
            "name": "subtitle_text"
          },
          "link": 89
        }
      ],
      "outputs": [
        {
          "name": "mask_index",
          "shape": 6,
          "type": "INT",
          "links": [
            136
          ]
        },
        {
          "name": "character_id",
          "shape": 6,
          "type": "STRING",
          "links": []
        },
        {
          "name": "start_time",
          "shape": 6,
          "type": "FLOAT",
          "links": []
        },
        {
          "name": "end_time",
          "shape": 6,
          "type": "FLOAT",
          "links": [
            137
          ]
        },
        {
          "name": "subtitle_text",
          "shape": 6,
          "type": "STRING",
          "links": [
            138
          ]
        },
        {
          "name": "duration",
          "shape": 6,
          "type": "FLOAT",
          "links": [
            141
          ]
        },
        {
          "name": "total_iterations",
          "type": "INT",
          "links": []
        },
        {
          "name": "is_finished",
          "type": "BOOLEAN",
          "links": null
        },
        {
          "name": "debug_info",
          "type": "STRING",
          "links": []
        }
      ],
      "properties": {
        "aux_id": "tmxujin/ComfyUI-Index-TTS",
        "ver": "f3dd666f8ccc7e8d6cc562a4f43892a1c365e22f",
        "Node name for S&R": "EnhancedSubtitleBatchIterator"
      },
      "widgets_values": [
        "{\n  \"segments\": [\n    {\"id\": \"Narrator\", \"start\": \"0:00.000\", \"end\": \"0:05.000\", \"字幕\": \"这是一个旁白片段\"},\n    {\"id\": \"Character1\", \"start\": \"0:05.000\", \"end\": \"0:10.000\", \"字幕\": \"这是角色1的台词\"},\n    {\"id\": \"Character2\", \"start\": \"0:10.000\", \"end\": \"0:15.000\", \"字幕\": \"这是角色2的台词\"}\n  ]\n}",
        "json",
        false,
        false
      ]
    },
    {
      "id": 363,
      "type": "easy showAnything",
      "pos": [
        1500.1971435546875,
        133.5707550048828
      ],
      "size": [
        210,
        249.17697143554688
      ],
      "flags": {},
      "order": 16,
      "mode": 0,
      "inputs": [
        {
          "name": "anything",
          "shape": 7,
          "type": "*",
          "link": 141
        }
      ],
      "outputs": [
        {
          "name": "output",
          "type": "*",
          "links": null
        }
      ],
      "title": "总时长",
      "properties": {
        "cnr_id": "comfyui-easy-use",
        "ver": "1.3.3",
        "Node name for S&R": "easy showAnything"
      },
      "widgets_values": [
        "1.5",
        "1.9",
        "1.5",
        "1.4"
      ]
    },
    {
      "id": 361,
      "type": "easy showAnything",
      "pos": [
        1267.1102294921875,
        129.62538146972656
      ],
      "size": [
        210,
        250
      ],
      "flags": {},
      "order": 14,
      "mode": 0,
      "inputs": [
        {
          "name": "anything",
          "shape": 7,
          "type": "*",
          "link": 137
        }
      ],
      "outputs": [
        {
          "name": "output",
          "type": "*",
          "links": null
        }
      ],
      "title": "结束时间",
      "properties": {
        "cnr_id": "comfyui-easy-use",
        "ver": "1.3.3",
        "Node name for S&R": "easy showAnything"
      },
      "widgets_values": [
        "1.45",
        "3.328",
        "4.821",
        "6.144"
      ]
    },
    {
      "id": 362,
      "type": "easy showAnything",
      "pos": [
        1023.156005859375,
        128.28433227539062
      ],
      "size": [
        210,
        250
      ],
      "flags": {},
      "order": 15,
      "mode": 0,
      "inputs": [
        {
          "name": "anything",
          "shape": 7,
          "type": "*",
          "link": 138
        }
      ],
      "outputs": [
        {
          "name": "output",
          "type": "*",
          "links": null
        }
      ],
      "title": "字幕",
      "properties": {
        "cnr_id": "comfyui-easy-use",
        "ver": "1.3.3",
        "Node name for S&R": "easy showAnything"
      },
      "widgets_values": [
        "“明天要降温了。”",
        "“爸，护膝要记得用”",
        "“穿件毛衣”",
        "“知道啦”"
      ]
    },
    {
      "id": 327,
      "type": "LoadImage",
      "pos": [
        319.3204650878906,
        787.0821533203125
      ],
      "size": [
        210,
        314
      ],
      "flags": {},
      "order": 8,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            92
          ]
        },
        {
          "name": "MASK",
          "type": "MASK",
          "links": [
            93
          ]
        }
      ],
      "title": "加载角色2",
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.3.63",
        "Node name for S&R": "LoadImage"
      },
      "widgets_values": [
        "Generated Image September 23, 2025 - 8_17AM.png",
        "image"
      ]
    },
    {
      "id": 326,
      "type": "LoadImage",
      "pos": [
        75.21660614013672,
        778.1511840820312
      ],
      "size": [
        210,
        314
      ],
      "flags": {},
      "order": 9,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            90
          ]
        },
        {
          "name": "MASK",
          "type": "MASK",
          "links": [
            91
          ]
        }
      ],
      "title": "加载角色1",
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.3.63",
        "Node name for S&R": "LoadImage"
      },
      "widgets_values": [
        "数字人.png",
        "image"
      ]
    },
    {
      "id": 305,
      "type": "LoadImage",
      "pos": [
        63.572479248046875,
        1151.1385498046875
      ],
      "size": [
        210,
        314
      ],
      "flags": {},
      "order": 10,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            94
          ]
        },
        {
          "name": "MASK",
          "type": "MASK",
          "links": [
            95
          ]
        }
      ],
      "title": "加载角色3",
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.3.63",
        "Node name for S&R": "LoadImage"
      },
      "widgets_values": [
        "temp.png",
        "image"
      ]
    }
  ],
  "links": [
    [
      50,
      245,
      0,
      281,
      2,
      "INT"
    ],
    [
      51,
      246,
      0,
      281,
      3,
      "INT"
    ],
    [
      89,
      310,
      8,
      300,
      0,
      "STRING"
    ],
    [
      90,
      326,
      0,
      328,
      0,
      "IMAGE"
    ],
    [
      91,
      326,
      1,
      328,
      1,
      "MASK"
    ],
    [
      92,
      327,
      0,
      328,
      2,
      "IMAGE"
    ],
    [
      93,
      327,
      1,
      328,
      3,
      "MASK"
    ],
    [
      94,
      305,
      0,
      328,
      4,
      "IMAGE"
    ],
    [
      95,
      305,
      1,
      328,
      5,
      "MASK"
    ],
    [
      96,
      303,
      0,
      328,
      6,
      "IMAGE"
    ],
    [
      97,
      303,
      1,
      328,
      7,
      "MASK"
    ],
    [
      99,
      328,
      0,
      281,
      0,
      "IMAGE"
    ],
    [
      121,
      281,
      0,
      357,
      0,
      "IMAGE"
    ],
    [
      123,
      352,
      0,
      310,
      6,
      "STRING"
    ],
    [
      125,
      354,
      0,
      310,
      1,
      "AUDIO"
    ],
    [
      126,
      355,
      0,
      310,
      2,
      "AUDIO"
    ],
    [
      127,
      356,
      0,
      310,
      3,
      "AUDIO"
    ],
    [
      128,
      353,
      0,
      310,
      4,
      "AUDIO"
    ],
    [
      129,
      355,
      0,
      310,
      0,
      "AUDIO"
    ],
    [
      136,
      300,
      0,
      328,
      8,
      "INT"
    ],
    [
      137,
      300,
      3,
      361,
      0,
      "*"
    ],
    [
      138,
      300,
      4,
      362,
      0,
      "*"
    ],
    [
      141,
      300,
      5,
      363,
      0,
      "*"
    ]
  ],
  "groups": [],
  "config": {},
  "extra": {
    "ds": {
      "scale": 0.9090909090909091,
      "offset": [
        412.7861177307777,
        -402.96644657633436
      ]
    },
    "frontendVersion": "1.27.10",
    "VHS_latentpreview": false,
    "VHS_latentpreviewrate": 0,
    "VHS_MetadataImage": true,
    "VHS_KeepIntermediate": true
  },
  "version": 0.4
}